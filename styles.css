/* IFFR Film Festival Planner - Inspired by festival poster and modern design */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    /* Disable webkit tap highlight (the teal rectangle on mobile) */
    -webkit-tap-highlight-color: transparent;
}

/* Remove annoying focus outlines from buttons */
button:focus,
button:focus-visible {
    outline: none !important;
    box-shadow: none !important;
}

/* Disable tap highlight specifically for buttons */
button,
a,
input,
select,
textarea {
    -webkit-tap-highlight-color: transparent;
}

/* Only show focus outline for keyboard navigation (accessibility) */
button:focus-visible:not(:active) {
    outline: 2px solid var(--purple);
    outline-offset: 2px;
}

:root {
    /* Festival poster colors */
    --pink: #FF69B4;
    --pink-light: #FFB6E1;
    --yellow: #FFD700;
    --yellow-bright: #FFEB3B;
    --teal: #4ECDC4;
    --mint: #7FFFD4;
    --purple: #8B5CF6;
    --purple-dark: #6D28D9;
    --red: #E74C3C;
    --blue: #3498DB;
    --blue-dark: #2980B9;
    --black: #1A1A1A;
    --gold: #FFD700;
    
    /* Status colors */
    --moderating: var(--yellow-bright);
    --favorited: var(--teal);
    --ticket: var(--purple);
    
    /* Backgrounds */
    --bg-dark: #2d2d2d;
    --bg-surface: rgba(255, 255, 255, 0.03);
    --bg-elevated: rgba(255, 255, 255, 0.06);
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg-dark);
    /* Removed gradients and fixed attachment to prevent flickering on mobile */
    color: #E0E0E0;
    line-height: 1.6;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden; /* Prevent horizontal scrollbar */
    /* Disable tap highlight globally */
    -webkit-tap-highlight-color: transparent;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
}

.container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 32px 24px;
    position: relative;
    z-index: 1;
    overflow-x: hidden; /* Prevent horizontal scrollbar */
}

.main-content-wrapper {
    display: flex;
    gap: 24px;
    align-items: flex-start;
    min-width: 0; /* Allow wrapper to shrink */
}

/* Favorites Sidebar */
.favorites-sidebar {
    width: 280px;
    min-width: 280px;
    background: var(--bg-surface);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 24px;
    padding: 24px;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    max-height: calc(100vh - 200px);
    position: sticky;
    top: 24px;
    display: flex;
    flex-direction: column;
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), min-width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    overflow-x: hidden; /* Prevent horizontal scrollbar */
}

.favorites-sidebar.collapsed {
    width: 60px;
    min-width: 60px;
    padding: 24px 12px;
}

.favorites-sidebar.collapsed .favorites-list {
    display: none;
}

.favorites-sidebar.collapsed .sidebar-header h3 {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    transform: rotate(180deg);
    white-space: nowrap;
    margin: 0 auto;
}

.favorites-sidebar.collapsed .sidebar-header {
    flex-direction: column;
    gap: 8px;
    padding-bottom: 0;
    border-bottom: none;
    border-right: none;
    margin-bottom: 0;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 2px solid var(--purple);
    cursor: pointer; /* Make entire header clickable */
    user-select: none; /* Prevent text selection */
    -webkit-user-select: none;
    transition: opacity 0.2s;
}

.sidebar-header:active {
    opacity: 0.7; /* Visual feedback when clicked */
}

.sidebar-header h3 {
    font-size: 18px;
    font-weight: 600;
    color: #FFFFFF;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    line-height: 1.3;
}

.favorites-count {
    background: var(--purple);
    color: white;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    min-width: 24px;
    text-align: center;
}

.sidebar-toggle-btn {
    background: var(--bg-elevated);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #E0E0E0;
    padding: 6px 8px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 10px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 24px;
    height: 24px;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
}

.sidebar-toggle-btn:hover {
    background: var(--bg-surface);
    border-color: var(--purple);
    transform: scale(1.1);
}

.sidebar-toggle-btn:active {
    transform: scale(0.95);
    opacity: 0.8; /* Quick visual feedback */
}

.sidebar-toggle-btn:focus {
    outline: none;
}

.sidebar-toggle-btn .toggle-icon {
    display: inline-block;
    transition: transform 0.2s;
    font-size: 10px;
    line-height: 1;
}

/* Desktop SVG icon - show on desktop, hide on mobile */
/* Default: show desktop SVG, hide mobile arrow (for screens > 1200px) */
.toggle-icon-desktop {
    display: inline-block;
}

.toggle-icon-mobile {
    display: none !important; /* Hide mobile arrow on desktop by default */
    transition: transform 0.3s ease; /* Simple rotation transition */
    transform: rotate(-90deg); /* Start pointing up when closed */
}

.sidebar-icon-svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
    display: block;
    transition: transform 0.2s;
}

/* Mobile SVG icon - simple, no rotation on the SVG itself */
.sidebar-icon-svg-mobile {
    width: 12px;
    height: 12px;
    fill: currentColor;
    display: block;
}

/* Simple rotation: rotate to point down when expanded */
.favorites-sidebar.expanded .toggle-icon-mobile {
    transform: rotate(90deg); /* Point down when open */
}

/* SVG icon remains in normal orientation when sidebar is collapsed */

.favorites-sidebar.collapsed .sidebar-toggle-btn {
    margin-top: 8px;
}

.favorites-sidebar.collapsed .sidebar-header > div {
    flex-direction: column;
    gap: 8px;
}

.favorites-list {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden; /* Prevent horizontal scrollbar */
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 2px 0; /* Add small padding to prevent clipping at top/bottom */
}

.favorite-film-item {
    background: var(--bg-elevated);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 7px 10px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden; /* Keep hidden for hover effects */
    user-select: none; /* Prevent text selection when clicking */
    -webkit-user-select: none;
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* Start from top */
    box-sizing: border-box; /* Ensure padding is included in width */
    width: 100%; /* Ensure it doesn't exceed container */
    max-width: 100%; /* Prevent overflow */
}

.favorite-film-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--teal);
    opacity: 0;
    transition: opacity 0.3s;
}

.favorite-film-item:hover {
    background: var(--bg-surface);
    border-color: var(--teal);
    box-shadow: 0 4px 12px rgba(78, 205, 196, 0.2);
}

/* Disable transform on mobile to prevent lag */
@media (min-width: 769px) {
    .favorite-film-item:hover {
        transform: translateX(4px);
    }
}

.favorite-film-item:hover::before {
    opacity: 1;
}

/* Active state for clicked favorite film item */
.favorite-film-item.active {
    background: var(--bg-surface);
    border-color: var(--purple);
    box-shadow: inset 0 0 0 2px rgba(139, 92, 246, 0.3); /* Use inset to prevent overflow */
}

.favorite-film-item.active::before {
    opacity: 1;
    background: var(--purple);
    width: 3px; /* Keep consistent width to prevent overflow */
}

.favorite-film-item.empty {
    text-align: center;
    padding: 40px 20px;
    color: rgba(255, 255, 255, 0.4);
    font-size: 13px;
    cursor: default;
    border: 1px dashed rgba(255, 255, 255, 0.1);
}

.favorite-film-item.empty:hover {
    transform: none;
    background: var(--bg-elevated);
    border-color: rgba(255, 255, 255, 0.1);
}

.favorite-film-title {
    font-weight: 600;
    font-size: 14px;
    color: #FFFFFF;
    margin: 0;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    line-height: 1;
}

/* When there's meta info, add spacing between title and meta */
.favorite-film-item:has(.favorite-film-meta) .favorite-film-title {
    margin-bottom: 8px;
}

/* When there's only a title (no meta), center it vertically */
.favorite-film-item:not(:has(.favorite-film-meta)) {
    justify-content: center;
    min-height: 44px; /* Minimum height for single-line titles */
}

.favorite-film-meta {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.6);
    line-height: 1.4;
    margin-top: 0;
    margin-bottom: 0;
}

/* Removed favorite-film-actions - cards are now fully clickable */

header {
    background: #00c2ac !important; /* IFFR teal background */
    border: none;
    padding: 16px 32px; /* Reduced top/bottom padding from 32px to 16px */
    border-radius: 24px;
    margin-bottom: 32px;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    gap: 24px;
    color-scheme: light !important; /* Force light mode for header */
    color: #000000 !important; /* Force black text color on header itself */
    /* Prevent dark mode from affecting header */
    filter: none !important;
    -webkit-filter: none !important;
}

/* Force black text in header, override dark mode */
header h1,
header > h1,
.container header h1,
header h1:not([style*="color"]),
body header h1,
header .user-schedule-subtitle {
    color: #000000 !important;
    -webkit-text-fill-color: #000000 !important;
    /* Prevent any filters or blend modes */
    filter: none !important;
    -webkit-filter: none !important;
    mix-blend-mode: normal !important;
    /* Force RGB values */
    color: rgb(0, 0, 0) !important;
}

.iffr-logo {
    height: 60px;
    width: auto;
    flex-shrink: 0;
    filter: brightness(0); /* Force black SVG */
}

.header-title-group {
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* Align children to the left */
    flex: 1;
    min-width: 0;
    margin-left: 10px;
}

/* Ensure h1 and subtitle are perfectly aligned - reset all positioning */
.header-title-group > h1,
.header-title-group > .user-schedule-subtitle {
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    text-indent: 0 !important;
    box-sizing: border-box !important;
    display: block;
    position: relative;
    left: 0 !important;
}

h1 {
    font-size: 36px;
    font-weight: 700;
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    color: #000000 !important; /* Bold black text like IFFR poster - force black */
    -webkit-text-fill-color: #000000 !important; /* Safari dark mode override */
    letter-spacing: -0.2px;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 0.9;
    text-align: left;
    text-indent: 0;
    /* Prevent dark mode filters from affecting h1 */
    filter: none !important;
    -webkit-filter: none !important;
    mix-blend-mode: normal !important;
}

.user-schedule-subtitle {
    font-size: 18px;
    font-weight: 500;
    margin: 0 !important;
    margin-top: 2px !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-bottom: 0 !important;
    padding: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    color: #000000 !important;
    -webkit-text-fill-color: #000000 !important;
    letter-spacing: -0.1px;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.2;
    opacity: 0.7;
    text-align: left;
    text-indent: 0;
    /* Prevent dark mode filters from affecting subtitle */
    filter: none !important;
    -webkit-filter: none !important;
    mix-blend-mode: normal !important;
}

.date-navigation {
    display: flex;
    align-items: center;
    gap: 20px;
}

.nav-btn {
    background: var(--bg-elevated);
    border: 1px solid rgba(255, 255, 255, 0.25); /* Increased from 0.1 to 0.25 for better visibility */
    color: #E0E0E0;
    padding: 12px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 18px;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    letter-spacing: -0.2px;
    line-height: 1.3;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
}

.nav-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s;
}

.nav-btn:hover::before {
    left: 100%;
}

.nav-btn:hover {
    background: var(--bg-elevated);
    border-color: var(--purple);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.nav-btn:active {
    transform: translateY(0);
    opacity: 0.8; /* Quick visual feedback */
}

/* Remove focus state immediately after click */
.nav-btn:focus {
    outline: none;
}

.nav-btn:disabled,
.nav-btn.disabled {
    opacity: 0.5 !important;
    background: rgba(100, 100, 100, 0.3) !important;
    cursor: not-allowed !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    transform: none !important;
    pointer-events: none !important;
}

.nav-btn:disabled:hover,
.nav-btn.disabled:hover {
    background: rgba(100, 100, 100, 0.3) !important;
    transform: none !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    cursor: not-allowed !important;
}

.nav-btn:disabled::before,
.nav-btn.disabled::before {
    display: none;
}

#date-range {
    font-weight: 600;
    font-size: 14px;
    color: rgba(255, 255, 255, 0.9);
    letter-spacing: -0.1px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    line-height: 1.3;
    white-space: nowrap;
}

.controls {
    margin-bottom: 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
}

.controls-left {
    display: flex;
    gap: 12px;
}

.controls-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.date-navigation-group {
    display: flex;
    align-items: center;
    gap: 12px;
}

.nav-buttons-group {
    display: flex;
    gap: 8px;
    align-items: center;
}

.btn-primary, .btn-secondary {
    border: none;
    padding: 14px 28px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
    letter-spacing: -0.1px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    line-height: 1.3;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
}

.btn-primary {
    background: var(--purple);
    color: white;
    box-shadow: 0 4px 16px rgba(139, 92, 246, 0.4);
}

.btn-primary::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn-primary:hover::before {
    width: 300px;
    height: 300px;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(139, 92, 246, 0.5);
}

.btn-primary:active {
    transform: translateY(0);
    opacity: 0.9; /* Quick visual feedback */
}

.btn-primary:focus {
    outline: none;
}

.btn-secondary {
    background: var(--bg-elevated);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #E0E0E0;
}

.btn-secondary:hover {
    background: var(--bg-surface);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

.btn-secondary:active {
    transform: translateY(0);
    opacity: 0.8; /* Quick visual feedback */
}

.btn-secondary:focus {
    outline: none;
}

.calendar {
    background: var(--bg-surface);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 24px;
    padding: 32px 32px 32px 6px; /* Reduced left padding from 32px to 8px */
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    position: relative;
    overflow-x: auto;
    flex: 1;
    min-width: 0; /* Allow calendar to shrink */
}

/* Calendar Navigation Buttons - Circular style like reference */
/* Navigation buttons - ensure both are identical and perfectly centered */
/* Industry standard: Use flexbox with precise alignment + small transform offset for visual centering */
.calendar-nav-btn,
#prev-days,
#next-days {
    background: var(--bg-elevated) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important; /* Increased from 0.15 to 0.3 for better visibility */
    color: #E0E0E0 !important;
    padding: 0 !important;
    margin: 0 !important;
    border-radius: 50% !important; /* Circular buttons like reference */
    cursor: pointer;
    font-size: 18px !important;
    font-weight: 600 !important;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace !important;
    letter-spacing: 0 !important;
    line-height: 1 !important; /* Normal line-height for proper flexbox centering */
    pointer-events: all;
    width: 40px !important; /* Circular button size */
    height: 40px !important; /* Circular button size */
    min-width: 40px !important;
    min-height: 40px !important;
    max-width: 40px !important;
    max-height: 40px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-shadow: 
        0 2px 4px rgba(0, 0, 0, 0.2),
        0 1px 2px rgba(0, 0, 0, 0.1) !important;
    text-align: center !important;
    flex-shrink: 0;
    box-sizing: border-box !important;
    -webkit-tap-highlight-color: transparent !important;
    user-select: none !important;
    -webkit-user-select: none !important;
}

/* Industry standard: Fine-tune visual centering with transform */
/* Accounts for font metrics and visual weight of < and > characters */
.calendar-nav-btn::after,
#prev-days::after,
#next-days::after {
    content: '';
    display: none;
}

/* Perfect visual centering for < and > characters */
/* Flexbox handles centering, but we need to account for font baseline and visual weight */
.calendar-nav-btn,
#prev-days,
#next-days {
    text-indent: 0;
    vertical-align: middle;
    /* Use transform for precise visual centering of < and > characters */
    /* The characters often appear slightly high due to their shape, so we adjust down */
    transform: translateY(0.5px);
}

/* Hover effect - ensure it's behind the text */
.calendar-nav-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s;
    z-index: 0; /* Behind the text */
}

/* Ensure text is on top and perfectly centered */
.calendar-nav-btn,
#prev-days,
#next-days {
    position: relative;
    z-index: 1; /* Above the hover effect */
}

.calendar-nav-btn:hover::before {
    left: 100%;
}

.calendar-nav-btn:hover {
    background: var(--bg-surface);
    border-color: var(--purple);
    transform: translateY(-0.5px); /* Slight lift on hover (base is 0.5px, so this lifts by 1px total) */
    box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.3),
        0 2px 4px rgba(139, 92, 246, 0.2),
        0 0 0 1px rgba(139, 92, 246, 0.1);
}

.calendar-nav-btn:active {
    transform: translateY(0.5px) scale(0.95); /* Maintain centering offset */
    opacity: 0.8; /* Quick visual feedback */
    box-shadow: 
        0 1px 2px rgba(0, 0, 0, 0.2),
        inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

.calendar-nav-btn:focus {
    outline: none;
}

.calendar-nav-btn:disabled,
.calendar-nav-btn.disabled {
    opacity: 0.5 !important;
    background: rgba(100, 100, 100, 0.3) !important;
    cursor: not-allowed !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    transform: none !important;
    pointer-events: none !important;
}

.calendar-nav-btn:disabled:hover,
.calendar-nav-btn.disabled:hover {
    background: rgba(100, 100, 100, 0.3) !important;
    transform: none !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    cursor: not-allowed !important;
}

.calendar-nav-btn:disabled::before,
.calendar-nav-btn.disabled::before {
    display: none;
}

.calendar-wrapper {
    display: flex;
    gap: 0;
    min-width: 0; /* Allow wrapper to shrink */
    width: 100%;
    box-sizing: border-box;
    overflow: hidden; /* Contain grid overflow */
}

.time-column {
    width: 42px;
    min-width: 42px;
    max-width: 42px;
    padding: 0 4px 0 2px; /* Less padding on left (2px), more on right (4px) */
    border-right: 1px solid rgba(255, 255, 255, 0.1); /* Original subtle color */
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    padding-top: 60px; /* Match day header height to align with time-slots */
    flex-shrink: 0; /* Prevent time column from shrinking */
    box-sizing: border-box;
}

.time-label {
    font-size: 9px;
    color: rgba(255, 255, 255, 0.5);
    text-align: right;
    padding-right: 4px;
    font-weight: 500;
    display: flex;
    align-items: flex-start;
    padding-top: 4px;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(5, minmax(0, 1fr)); /* Use 0 instead of 200px to allow full flexibility */
    gap: 0;
    flex: 1;
    min-width: 0; /* Allow grid to shrink below content size */
    width: 100%;
    box-sizing: border-box;
}

.day-column {
    border-right: 1px solid rgba(255, 255, 255, 0.08); /* Original subtle color */
    padding: 0;
    min-height: 960px;
    position: relative;
    min-width: 0; /* Allow column to shrink - grid handles min-width */
    max-width: 100%; /* Prevent columns from exceeding container */
    overflow: visible; /* Allow film blocks to be positioned */
    box-sizing: border-box;
    width: 100%; /* Ensure column takes full grid cell width */
}

.day-column:last-child {
    border-right: none;
}

.day-header {
    font-weight: 600;
    font-size: 12px;
    margin-bottom: 0;
    padding: 16px 16px 12px 16px;
    border-bottom: 2px solid var(--purple);
    color: #FFFFFF;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    line-height: 1.3;
    box-sizing: border-box;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%; /* Ensure header takes full column width */
    min-width: 0; /* Allow header to shrink with column */
    max-width: 100%; /* Prevent overflow */
}

.day-date {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.6);
    margin-top: 6px;
    font-weight: 400;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    letter-spacing: 0.3px;
}

.time-slots {
    position: relative;
    width: 100%;
    box-sizing: border-box;
    overflow: visible; /* Allow film blocks to be positioned */
    position: relative;
    min-height: 960px;
    background: 
        repeating-linear-gradient(
            transparent,
            transparent 59px,
            rgba(255, 255, 255, 0.03) 59px, /* Original subtle color */
            rgba(255, 255, 255, 0.03) 60px
        );
}

.film-block {
    position: absolute;
    padding: 6px 8px;
    border-radius: 4px;
    margin: 1px;
    cursor: pointer;
    font-size: 12px;
    border-left: 3px solid;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    overflow: hidden;
    box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    min-height: 80px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* Changed from space-between to flex-start */
    box-sizing: border-box;
    max-width: calc(100% - 2px); /* Prevent overflow beyond column */
    word-wrap: break-word;
    overflow-wrap: break-word;
    /* Width and left will be set by JavaScript, but ensure it respects container */
    min-width: 0; /* Allow block to shrink */
}

/* Simplified view for overlapping films - show only title */
.film-block.simplified {
    min-height: 40px;
    padding: 4px 6px;
    justify-content: center;
}

.film-block.simplified .film-time,
.film-block.simplified .film-director,
.film-block.simplified .film-programme,
.film-block.simplified .film-extra-info {
    display: none;
}

.film-block.simplified .film-title {
    font-size: 11px;
    line-height: 1.2;
    margin: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
}

.film-block.simplified .film-status-icons {
    position: absolute;
    top: 2px;
    right: 4px;
    font-size: 10px;
}

.film-block::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s;
}

.film-block:hover::before {
    opacity: 1;
}

.film-block:hover {
    transform: translateX(4px) scale(1.02);
    box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    z-index: 10;
}

.film-block:active {
    transform: translateX(2px) scale(0.98);
    opacity: 0.85;
    box-shadow: 
        0 2px 8px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.film-block.moderating {
    background: linear-gradient(135deg, rgba(255, 235, 59, 0.25) 0%, rgba(255, 235, 59, 0.15) 100%);
    border-left-color: var(--moderating);
    color: #FFEB3B;
}

.film-block.favorited {
    background: linear-gradient(135deg, rgba(78, 205, 196, 0.25) 0%, rgba(78, 205, 196, 0.15) 100%);
    border-left-color: var(--favorited);
    color: #4ECDC4;
}

.film-block.ticket {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.25) 0%, rgba(139, 92, 246, 0.15) 100%);
    border-left-color: var(--ticket);
    color: #F5F3FF; /* Light lavender-tinted white for better visual interest */
}

.film-block.unavailable {
    background: linear-gradient(135deg, rgba(128, 128, 128, 0.3) 0%, rgba(128, 128, 128, 0.2) 100%);
    border-left-color: #808080;
    color: #B0B0B0;
    opacity: 0.7;
}

.film-block.unavailable:hover {
    opacity: 0.85;
}

/* Text color hierarchy for ticket blocks */
.film-block.ticket .film-time {
    color: #E9D5FF; /* Light purple for time */
    opacity: 0.9;
}

.film-block.ticket .film-title {
    color: #FFFFFF; /* Pure white for title - highest contrast */
    opacity: 1;
}

.film-block.ticket .film-director,
.film-block.ticket .film-programme {
    color: #E9D5FF; /* Light lavender for director/programme */
    opacity: 0.95;
}

.film-block.ticket .film-extra-info {
    color: #E9D5FF; /* Light purple for extra info */
    opacity: 0.85;
}

.film-block.default {
    background: var(--bg-elevated);
    border-left-color: rgba(255, 255, 255, 0.3);
    color: rgba(255, 255, 255, 0.8);
}

/* Detail Modal */
.detail-section {
    margin-bottom: 16px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    font-size: 12px;
    line-height: 1.4;
}

.detail-item {
    margin-bottom: 8px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    line-height: 1.4;
}

.detail-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.detail-item strong {
    color: rgba(255, 255, 255, 0.7);
    display: inline-block;
    min-width: 80px;
    font-weight: 500;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.detail-actions {
    display: flex;
    gap: 12px;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

#film-detail-modal .close {
    position: absolute;
    top: 16px;
    right: 16px;
    float: none;
    z-index: 20; /* Higher z-index to ensure it's on top */
    font-size: 24px;
    line-height: 1;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

#film-detail-modal .modal-content h2 {
    margin-top: 0;
    margin-bottom: 16px;
    padding-right: 40px;
    font-size: 18px;
    font-weight: 600;
    line-height: 1.3;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    letter-spacing: -0.2px;
}

.film-time {
    font-weight: 500;
    font-size: 11px;
    margin-bottom: 4px; /* Space between time and title */
    text-transform: uppercase;
    letter-spacing: 0.3px;
    opacity: 0.8;
    line-height: 1;
    padding-right: 30px; /* Make room for status icons */
    flex-shrink: 0;
}

.film-title {
    font-weight: 600;
    margin-bottom: 4px; /* Space between title and director/programme */
    font-size: 12px;
    line-height: 1.3;
    color: #FFFFFF;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    width: 100%;
    flex-shrink: 1;
    letter-spacing: -0.1px;
}

.film-director {
    font-size: 10px;
    opacity: 0.85;
    line-height: 1.3;
    margin-bottom: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    flex-shrink: 0;
}

.film-programme {
    font-size: 10px;
    opacity: 0.85;
    line-height: 1.3;
    margin-bottom: 4px; /* Space before extra-info */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    flex-shrink: 0;
}

.film-extra-info {
    font-size: 9px;
    opacity: 0.7;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    margin-top: auto; /* Push to bottom if there's space */
    flex-shrink: 0;
    min-width: 0;
}

.film-status-icons {
    position: absolute;
    top: 4px;
    right: 4px;
    display: flex;
    gap: 3px;
    z-index: 5;
    align-items: center;
}

.status-icon {
    font-size: 10px;
    line-height: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 2px 3px;
    border-radius: 3px;
    backdrop-filter: blur(4px);
    min-width: 14px;
    height: 14px;
}

#status-section {
    padding-top: 4px;
}

#status-section strong {
    display: block;
    margin-bottom: 8px;
}

.status-toggle-btn {
    padding: 10px 18px;
    border: 1px solid var(--purple);
    background: var(--bg-dark);
    color: #E0E0E0;
    border-radius: 8px;
    cursor: pointer;
    font-size: 12px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    transition: all 0.2s;
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    line-height: 1.4;
    gap: 4px;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
}

.status-toggle-btn:hover {
    background: var(--bg-elevated);
    border-color: var(--purple);
    transform: translateY(-1px);
}

.status-toggle-btn:active {
    transform: translateY(0);
    opacity: 0.8; /* Quick visual feedback */
}

.status-toggle-btn:focus {
    outline: none;
}

.status-toggle-btn.active {
    background: var(--purple);
    border-color: var(--purple);
    color: white;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);
}

.status-toggle-btn.disabled,
.status-toggle-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed !important;
    pointer-events: none;
}

.status-toggle-btn.disabled:hover,
.status-toggle-btn:disabled:hover {
    background: var(--bg-surface);
    transform: none;
}

.status-btn-icon {
    font-size: 16px;
    line-height: 1;
}

.status-btn-label {
    font-size: 11px;
    line-height: 1.2;
}

/* Modal (for add film) */
.modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.modal-content {
    background: var(--bg-dark);
    background-image: 
        radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 105, 180, 0.08) 0%, transparent 50%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin: 5% auto;
    padding: 40px;
    border-radius: 24px;
    width: 90%;
    max-width: 600px;
    max-height: 85vh;
    overflow-y: auto;
    box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    position: relative;
    z-index: 1; /* Ensure content is above the grainy background */
}

/* Ensure all modal content children are above the grainy background */
.modal-content > * {
    position: relative;
    z-index: 1;
}

/* Detail Panel - Simple fixed positioning */
#film-detail-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    pointer-events: none;
}

#film-detail-modal.open {
    display: block;
}

#film-detail-modal .modal-content {
    position: fixed;
    width: 340px;
    max-width: calc(90vw - 40px);
    margin: 0;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: var(--bg-dark);
    background-image: 
        radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 105, 180, 0.08) 0%, transparent 50%);
    padding: 20px;
    padding-top: 20px; /* Ensure top padding for close button space */
    overflow-y: auto;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    pointer-events: all;
    opacity: 1;
    transform: scale(1);
    z-index: 1; /* Ensure content is above the grainy background */
}

/* Ensure film detail modal content children are above the grainy background, but exclude close button */
#film-detail-modal .modal-content > *:not(.close) {
    position: relative;
    z-index: 1;
}

#film-detail-modal.open .modal-content.open-right {
    animation: slideInRight 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#film-detail-modal.open .modal-content.open-left {
    animation: slideInLeft 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

.modal-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    border-radius: 24px;
    z-index: 0;
}

.close {
    color: rgba(255, 255, 255, 0.6);
    float: right;
    font-size: 32px;
    font-weight: 300;
    cursor: pointer;
    line-height: 1;
    transition: all 0.3s;
    position: relative;
    z-index: 10;
}

.close:hover {
    color: #FFFFFF;
    transform: rotate(90deg);
}

.modal-content h2 {
    color: #FFFFFF;
    margin-bottom: 24px;
    font-size: 28px;
    font-weight: 700;
}

form label {
    display: block;
    margin-bottom: 20px;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
}

form input, form select {
    width: 100%;
    padding: 14px 16px;
    margin-top: 8px;
    background: var(--bg-elevated);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    font-size: 12px;
    color: #FFFFFF;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
    transition: all 0.3s;
    backdrop-filter: blur(10px);
    line-height: 1.4;
    letter-spacing: -0.1px;
}

form input:focus, form select:focus {
    outline: none;
    border-color: var(--purple);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
    background: var(--bg-surface);
}

form input::placeholder {
    color: rgba(255, 255, 255, 0.4);
}

/* Unavailable time - disabled fields styling */
.unavailable-disabled {
    transition: opacity 0.3s ease;
}

.unavailable-disabled input:disabled,
.unavailable-disabled select:disabled {
    background: rgba(255, 255, 255, 0.02) !important;
    border-color: rgba(255, 255, 255, 0.05) !important;
    color: rgba(255, 255, 255, 0.3) !important;
    cursor: not-allowed !important;
}

/* Date and Time Input Styling */
input[type="date"],
input[type="time"] {
    position: relative;
    color-scheme: dark;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: textfield;
}

/* Webkit (Chrome, Safari, Edge) date/time picker styling */
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator {
    cursor: pointer;
    filter: invert(1) brightness(0.8);
    opacity: 0.7;
    padding: 4px;
    margin-left: 8px;
    transition: opacity 0.2s, filter 0.2s;
    background-size: 16px 16px;
}

input[type="date"]::-webkit-calendar-picker-indicator:hover,
input[type="time"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
    filter: invert(1) brightness(1);
}

/* Date input text fields styling */
input[type="date"]::-webkit-datetime-edit-text,
input[type="date"]::-webkit-datetime-edit-month-field,
input[type="date"]::-webkit-datetime-edit-day-field,
input[type="date"]::-webkit-datetime-edit-year-field {
    color: #FFFFFF;
    padding: 0 2px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
}

input[type="date"]::-webkit-datetime-edit-month-field:focus,
input[type="date"]::-webkit-datetime-edit-day-field:focus,
input[type="date"]::-webkit-datetime-edit-year-field:focus {
    background-color: rgba(139, 92, 246, 0.2);
    color: #FFFFFF;
    border-radius: 4px;
    outline: none;
}

/* Time input text fields styling */
input[type="time"]::-webkit-datetime-edit-text,
input[type="time"]::-webkit-datetime-edit-hour-field,
input[type="time"]::-webkit-datetime-edit-minute-field,
input[type="time"]::-webkit-datetime-edit-ampm-field {
    color: #FFFFFF;
    padding: 0 2px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
}

input[type="time"]::-webkit-datetime-edit-hour-field:focus,
input[type="time"]::-webkit-datetime-edit-minute-field:focus,
input[type="time"]::-webkit-datetime-edit-ampm-field:focus {
    background-color: rgba(139, 92, 246, 0.2);
    color: #FFFFFF;
    border-radius: 4px;
    outline: none;
}

/* Hide spinner buttons */
input[type="date"]::-webkit-inner-spin-button,
input[type="time"]::-webkit-inner-spin-button {
    display: none;
}

input[type="date"]::-webkit-outer-spin-button,
input[type="time"]::-webkit-outer-spin-button {
    display: none;
}

/* Firefox date/time input styling */
input[type="date"]::-moz-calendar-picker-indicator,
input[type="time"]::-moz-calendar-picker-indicator {
    filter: invert(1) brightness(0.8);
    opacity: 0.7;
    cursor: pointer;
    padding: 4px;
    margin-left: 8px;
    transition: opacity 0.2s, filter 0.2s;
}

input[type="date"]::-moz-calendar-picker-indicator:hover,
input[type="time"]::-moz-calendar-picker-indicator:hover {
    opacity: 1;
    filter: invert(1) brightness(1);
}

/* Improve date/time input appearance on focus */
input[type="date"]:focus,
input[type="time"]:focus {
    border-color: var(--purple);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
    background: rgba(139, 92, 246, 0.05);
}

/* Additional styling for time inputs specifically */
input[type="time"] {
    font-variant-numeric: tabular-nums;
    letter-spacing: 0.5px;
}

/* Ensure consistent appearance across browsers */
input[type="date"]::-webkit-datetime-edit,
input[type="time"]::-webkit-datetime-edit {
    display: flex;
    align-items: center;
}

/* Override the blue highlight in time picker dropdown */
input[type="time"]::-webkit-datetime-edit-hour-field:focus,
input[type="time"]::-webkit-datetime-edit-minute-field:focus {
    background-color: rgba(139, 92, 246, 0.3) !important;
    color: #FFFFFF !important;
    border-radius: 4px !important;
    outline: 2px solid var(--purple) !important;
    outline-offset: -2px !important;
}

/* Style the native time picker dropdown (limited browser support) */
input[type="time"] {
    accent-color: var(--purple);
}

/* Additional styling to override default blue selection */
input[type="time"]::-webkit-datetime-edit-hour-field[aria-valuenow],
input[type="time"]::-webkit-datetime-edit-minute-field[aria-valuenow] {
    background-color: rgba(139, 92, 246, 0.2) !important;
}

/* Note: The native time picker dropdown (the popup with hour/minute columns) 
   is controlled by the browser and cannot be fully styled with CSS.
   The blue highlight you see is the browser's default selection color.
   To fully customize it, we would need a JavaScript date/time picker library. */

#parse-results {
    margin-top: 24px;
}

.screening-option {
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 20px;
    margin: 12px 0;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s;
    background: var(--bg-elevated);
    backdrop-filter: blur(10px);
}

.screening-option:hover {
    background: var(--bg-surface);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateX(4px);
}

.screening-option.selected {
    background: rgba(139, 92, 246, 0.2); /* Solid purple background */
    border-color: var(--purple);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.screening-option.unavailable {
    opacity: 0.5 !important;
    background: rgba(100, 100, 100, 0.3) !important;
    cursor: not-allowed !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    pointer-events: none !important;
    position: relative;
}

.screening-option.unavailable::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    z-index: 1;
}

.screening-option.unavailable:hover {
    background: rgba(100, 100, 100, 0.3) !important;
    transform: none !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    cursor: not-allowed !important;
}

/* Scrollbar styling */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-dark);
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Slim horizontal scrollbar for detail modal */
#film-detail-modal .modal-content {
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: rgba(255, 255, 255, 0.2) var(--bg-dark); /* Firefox */
}

#film-detail-modal .modal-content::-webkit-scrollbar {
    width: 8px;
    height: 4px; /* Slim horizontal scrollbar */
}

#film-detail-modal .modal-content::-webkit-scrollbar:horizontal {
    height: 4px;
}

/* Standard scrollbar (non-webkit) */
* {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) var(--bg-dark);
}

/* Screening Switcher in Detail View */
.screening-switcher {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.screening-switcher-label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 12px;
    display: block;
    font-weight: 500;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
}

.screening-option-small {
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 12px;
    margin: 8px 0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    background: var(--bg-elevated);
    font-size: 11px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
}

.screening-option-small:hover {
    background: var(--bg-surface);
    border-color: rgba(255, 255, 255, 0.2);
}

.screening-option-small.selected {
    background: rgba(139, 92, 246, 0.2); /* Default purple background */
    border-color: var(--purple);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
}

/* Match selected screening background to film block color based on status */
.screening-switcher-ticket .screening-option-small.selected {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.25) 0%, rgba(139, 92, 246, 0.15) 100%);
    border-color: var(--ticket);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
}

.screening-switcher-favorited .screening-option-small.selected {
    background: linear-gradient(135deg, rgba(78, 205, 196, 0.25) 0%, rgba(78, 205, 196, 0.15) 100%);
    border-color: var(--favorited);
    box-shadow: 0 2px 8px rgba(78, 205, 196, 0.3);
}

.screening-switcher-moderating .screening-option-small.selected {
    background: linear-gradient(135deg, rgba(255, 235, 59, 0.25) 0%, rgba(255, 235, 59, 0.15) 100%);
    border-color: var(--moderating);
    box-shadow: 0 2px 8px rgba(255, 235, 59, 0.3);
}

.screening-switcher-default .screening-option-small.selected {
    background: var(--bg-elevated);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
}

.screening-option-small.unavailable {
    opacity: 0.5;
    background: rgba(100, 100, 100, 0.2);
    cursor: not-allowed !important;
    border-color: rgba(255, 255, 255, 0.05);
}

.screening-option-small.unavailable:hover {
    background: rgba(100, 100, 100, 0.2);
    border-color: rgba(255, 255, 255, 0.05);
}

.screening-option-small .screening-time {
    font-weight: 600;
    color: #FFFFFF;
    margin-bottom: 4px;
}

.screening-option-small .screening-location {
    color: rgba(255, 255, 255, 0.6);
    font-size: 10px;
}

/* Responsive - Industry Standard Breakpoints */
/* Desktop: ensure mobile icon is hidden, desktop SVG is shown */
@media (min-width: 1201px) {
    .toggle-icon-desktop {
        display: inline-block !important;
    }
    
    .toggle-icon-mobile {
        display: none !important;
    }
    
    /* Active state when sidebar is open (not collapsed) on desktop */
    .favorites-sidebar:not(.collapsed) .sidebar-toggle-btn {
        border-color: var(--purple);
        box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.3);
    }
}

@media (min-width: 1600px) {
    .calendar-grid {
        grid-template-columns: repeat(5, minmax(250px, 1fr));
    }
    
    .day-column {
        min-width: 250px;
        max-width: 350px; /* Prevent columns from getting too wide */
    }
}

@media (max-width: 1400px) {
    .calendar-grid {
        grid-template-columns: repeat(5, minmax(220px, 1fr));
    }
    
    .day-column {
        min-width: 220px;
    }
}

@media (max-width: 1200px) {
    .main-content-wrapper {
        flex-direction: column;
    }
    
    /* Show mobile SVG icon (rotated), hide desktop SVG on mobile/tablet */
    .toggle-icon-desktop {
        display: none !important;
    }
    
    .toggle-icon-mobile {
        display: inline-block !important;
    }
    
    /* Move favorites sidebar to controls bar on mobile - Line 2 */
    .favorites-sidebar {
        width: 100%;
        min-width: 0;
        max-height: 60px; /* Horizontal strip height when collapsed */
        position: relative;
        top: 0;
        padding: 8px 12px;
        flex-direction: column; /* Changed to column to stack header and list */
        align-items: stretch;
        overflow: hidden;
        transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        margin: 0;
        border-radius: 8px;
        background: var(--bg-elevated);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* Horizontal strip layout */
    .favorites-sidebar .sidebar-header {
        flex-direction: row;
        width: 100%;
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
        border-right: none;
        justify-content: space-between;
        align-items: center;
        flex-shrink: 0; /* Don't shrink the header */
    }
    
    .favorites-sidebar .sidebar-header h3 {
        writing-mode: horizontal-tb;
        text-orientation: mixed;
        transform: none;
        white-space: nowrap;
        margin: 0;
        font-size: 14px;
    }
    
    .favorites-sidebar .sidebar-header > div {
        flex-direction: row;
        gap: 12px;
        align-items: center;
    }
    
    .favorites-sidebar .favorites-list {
        display: none; /* Hidden by default in horizontal strip */
        flex-direction: column;
        gap: 12px;
        padding-top: 16px;
        margin-top: 16px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        max-height: 400px;
        overflow-y: auto;
        flex-shrink: 0;
    }
    
    /* When expanded, show the list and increase height */
    .favorites-sidebar.expanded {
        max-height: 500px !important; /* 60px header + ~400px list + padding */
    }
    
    .favorites-sidebar.expanded .favorites-list {
        display: flex !important;
    }
    
    /* Arrow rotation is handled by base rules - no need to duplicate here */
    
    .calendar-grid {
        grid-template-columns: repeat(5, minmax(200px, 1fr));
    }
    
    .day-column {
        min-width: 200px;
    }
}

@media (max-width: 1024px) {
    .calendar-grid {
        grid-template-columns: repeat(5, minmax(180px, 1fr));
    }
    
    .day-column {
        min-width: 180px;
    }
    
    .film-block {
        font-size: 11px;
        padding: 5px 6px;
    }
    
    /* Better spacing for film block elements on mobile */
    .film-time {
        margin-bottom: 7px !important; /* More space between time and title */
    }
    
    .film-title {
        margin-bottom: 2px !important; /* Less space between title and director/programme */
        font-size: 12px; /* Slightly larger for better readability */
        line-height: 1.1; /* Better line spacing */
    }
    
    .film-director,
    .film-programme {
        margin-bottom: 0px !important; /* Minimal space between director and programme */
        font-size: 10px;
    }
    
    .film-programme {
        margin-bottom: 4px !important; /* Space before extra-info */
    }
}

@media (max-width: 900px) {
    .calendar-grid {
        grid-template-columns: repeat(5, minmax(160px, 1fr));
    }
    
    .day-column {
        min-width: 160px;
    }
}

@media (max-width: 768px) {
    /* Remove all focus outlines on mobile/touch devices */
    button:focus,
    button:focus-visible,
    button:active:focus {
        outline: none !important;
        box-shadow: none !important;
    }
    
    /* Force disable tap highlight on mobile for all interactive elements */
    * {
        -webkit-tap-highlight-color: transparent !important;
    }
    
    button,
    a,
    input,
    select,
    textarea,
    .nav-btn,
    .btn-primary,
    .btn-secondary,
    .calendar-nav-btn,
    .status-toggle-btn,
    .sidebar-toggle-btn,
    .sidebar-header,
    .favorite-film-item,
    .film-block,
    .screening-option {
        -webkit-tap-highlight-color: transparent !important;
    }
    
    /* Disable transform animations on ALL buttons on mobile to prevent lag */
    button:hover,
    .nav-btn:hover,
    .btn-primary:hover,
    .btn-secondary:hover,
    .calendar-nav-btn:hover,
    .status-toggle-btn:hover,
    .sidebar-toggle-btn:hover,
    .sidebar-header:hover,
    .film-block:hover,
    .screening-option:hover,
    .screening-option-small:hover {
        transform: none !important;
    }
    
    /* Keep minimal scale for active feedback only */
    button:active,
    .calendar-nav-btn:active,
    .film-block:active {
        transform: scale(0.98) !important;
        opacity: 0.85 !important;
    }
    
    /* Simplify transitions on mobile - remove transform from all transitions */
    button,
    .nav-btn,
    .btn-primary,
    .btn-secondary,
    .calendar-nav-btn,
    #prev-days,
    #next-days,
    #add-film-btn,
    #manual-add-btn,
    #settings-btn,
    .status-toggle-btn,
    .sidebar-toggle-btn,
    .sidebar-header,
    .screening-option,
    .screening-option-small {
        transition: background-color 0.15s, border-color 0.15s, box-shadow 0.15s, opacity 0.15s !important;
    }
    
    /* Simple arrow rotation on mobile - rotate the container */
    .toggle-icon-mobile {
        transition: transform 0.3s ease !important;
        transform: rotate(-90deg) !important; /* Start pointing up when closed */
    }
    
    .favorites-sidebar.expanded .toggle-icon-mobile {
        transform: rotate(90deg) !important; /* Point down when open */
    }
    
    /* Film blocks get a smoother transition for active feedback */
    .film-block {
        transition: transform 0.15s, opacity 0.15s, box-shadow 0.15s !important;
    }
    
    /* Disable all fancy hover effects on mobile */
    .nav-btn::before,
    .btn-primary::before,
    .calendar-nav-btn::before {
        display: none !important; /* Disable shimmer effects */
    }
    
    .calendar {
        overflow-x: auto;
        padding: 16px 16px 16px 2px; /* Reduced left padding from 16px to 4px */
        -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        width: 100%; /* Ensure calendar takes full width */
        flex: 1 1 100%; /* Take full width in column layout */
        box-sizing: border-box;
    }
    
    .calendar-wrapper {
        width: 100%;
        min-width: 0; /* Remove forced width */
        overflow-x: visible;
        box-sizing: border-box;
    }
    
    .calendar-grid {
        width: 100%;
        min-width: 0; /* Remove forced width */
        box-sizing: border-box;
        /* grid-template-columns will be set dynamically by JavaScript based on daysToShow */
    }
    
    .day-column {
        min-width: 0; /* Allow columns to shrink */
        max-width: none; /* Remove max-width constraint */
        border-right: 1px solid rgba(255, 255, 255, 0.08) !important; /* Original subtle color */
        /* Grid columns are controlled by grid-template-columns in JavaScript */
    }
    
    .time-column {
        min-width: 38px;
        width: 38px;
        max-width: 38px;
        padding: 0 3px 0 2px !important; /* Less padding on left (2px), more on right (3px) */
        flex-shrink: 0; /* Prevent time column from shrinking */
        border-right: 1px solid rgba(255, 255, 255, 0.1) !important; /* Original subtle color */
    }
    
    /* Keep original subtle timetable lines on mobile */
    .time-slots {
        background: 
            repeating-linear-gradient(
                transparent,
                transparent 59px,
                rgba(255, 255, 255, 0.03) 59px, /* Original subtle color */
                rgba(255, 255, 255, 0.03) 60px
            ) !important;
    }
    
    /* Make nav button borders more visible on mobile */
    .nav-btn {
        border: 1px solid rgba(255, 255, 255, 0.4) !important; /* Increased from 0.25 to 0.4 for mobile */
    }
    
    .calendar-nav-btn,
    #prev-days,
    #next-days {
        border: 1px solid rgba(255, 255, 255, 0.45) !important; /* Increased from 0.3 to 0.45 for mobile */
    }
    
    .container {
        padding: 12px;
    }
    
    header {
        padding: 10px 20px; /* Reduced top/bottom padding from 16px to 10px */
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 20px;
        align-items: center; /* Keep items aligned */
    }
    
    .iffr-logo {
        height: 36px;
        width: auto;
        filter: brightness(0); /* Force black SVG */
        flex-shrink: 0; /* Prevent logo from shrinking */
    }
    
    h1 {
        font-size: 16px;
        color: #000000 !important; /* Force black text - override any dark mode */
        -webkit-text-fill-color: #000000 !important; /* Safari dark mode override */
        margin-left: 10px; /* Keep spacing next to logo */
        margin-top: 0;
        margin-bottom: 0;
        flex: 1;
        min-width: 0; /* Allow text to wrap to two rows if needed */
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    .modal-content {
        padding: 24px;
        margin: 10% auto;
    }
    
    .favorites-sidebar {
        max-height: 250px;
        overflow-x: hidden; /* Prevent horizontal scrollbar on mobile */
    }
    
    /* Ensure favorite items don't cause horizontal scroll on mobile */
    .favorite-film-item {
        transform: none !important; /* Disable all transforms on mobile */
    }
    
    .favorite-film-item:hover {
        transform: none !important; /* Disable hover transform on mobile */
    }
    
    .favorite-film-item.active {
        box-shadow: inset 0 0 0 2px rgba(139, 92, 246, 0.3) !important; /* Use inset to prevent overflow */
    }
    
    /* Make controls responsive - 3 lines on mobile */
    /* Line 1: Controls (Add Film, Manual, Settings) */
    /* Line 2: Favorites */
    /* Line 3: Date Navigation */
    .controls {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
    }
    
    .controls-left {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        order: 1;
    }
    
    .controls-center {
        display: flex;
        align-items: center;
        order: 2;
        width: 100%;
    }
    
    .controls-right {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        order: 3;
    }
    
    .date-navigation-group {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    /* Add Film button - biggest on mobile */
    #add-film-btn {
        flex: 1;
        min-width: 120px;
        padding: 12px 20px;
        font-size: 14px;
        font-weight: 600;
    }
    
    /* Manual Entry and Settings - small buttons */
    #manual-add-btn,
    #settings-btn {
        padding: 8px 12px;
        font-size: 11px;
        flex-shrink: 0;
    }
    
    /* Favorites sidebar header - smaller on mobile */
    .favorites-sidebar .sidebar-header {
        padding: 8px 12px;
    }
    
    .favorites-sidebar .sidebar-header h3 {
        font-size: 10px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .favorites-count {
        padding: 2px 6px;
        font-size: 10px;
        border-radius: 8px;
        min-width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .sidebar-toggle-btn {
        padding: 4px 6px;
        min-width: 20px;
        height: 20px;
        border-radius: 4px;
    }
    
    .sidebar-toggle-btn .sidebar-icon-svg-mobile {
        width: 10px;
        height: 10px;
    }
    
    .btn-primary, .btn-secondary {
        padding: 10px 16px;
        font-size: 11px;
    }
    
    .nav-btn {
        padding: 10px 16px;
        font-size: 14px;
    }
    
    #date-range {
        font-size: 16px;
    }
}

/* Animation for film blocks appearing */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.film-block {
    animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dark mode overrides - Force visible borders and lines on mobile dark mode */
/* Use high specificity and !important to override browser dark mode */
@media (prefers-color-scheme: dark) {
    /* Force h1 and subtitle to be black in dark mode with maximum specificity */
    header h1,
    .container header h1,
    body header h1,
    html body header h1,
    header > h1,
    header .user-schedule-subtitle {
        color: #000000 !important;
        color: rgb(0, 0, 0) !important;
        -webkit-text-fill-color: #000000 !important;
        /* Prevent any filters or blend modes */
        filter: none !important;
        -webkit-filter: none !important;
        mix-blend-mode: normal !important;
    }
    .user-schedule-subtitle {
        font-size: 14px;
    }
    
    /* Also force header itself */
    header {
        color: #000000 !important;
        filter: none !important;
        -webkit-filter: none !important;
    }
    
    /* Timetable borders - keep original subtle color even in dark mode */
    .calendar .time-column {
        border-right-color: rgba(255, 255, 255, 0.1) !important;
        border-right-style: solid !important;
        border-right-width: 1px !important;
    }
    
    .calendar .day-column {
        border-right-color: rgba(255, 255, 255, 0.08) !important;
        border-right-style: solid !important;
        border-right-width: 1px !important;
    }
    
    /* Timetable hour lines - keep original subtle color even in dark mode */
    .calendar .time-slots {
        background: 
            repeating-linear-gradient(
                transparent,
                transparent 59px,
                rgba(255, 255, 255, 0.03) 59px, /* Original subtle color */
                rgba(255, 255, 255, 0.03) 60px
            ) !important;
        background-color: transparent !important;
    }
    
    /* Nav button borders - force visible */
    .controls .nav-btn {
        border-color: rgba(255, 255, 255, 0.6) !important;
        border-style: solid !important;
        border-width: 1px !important;
    }
    
    .controls .calendar-nav-btn,
    .controls #prev-days,
    .controls #next-days {
        border-color: rgba(255, 255, 255, 0.6) !important;
        border-style: solid !important;
        border-width: 1px !important;
    }
    
    /* Mobile specific dark mode overrides - even higher opacity */
    @media (max-width: 768px) {
        /* Force h1 and subtitle to be black on mobile dark mode with maximum specificity */
        header h1,
        .container header h1,
        body header h1,
        html body header h1,
        header > h1,
        header .user-schedule-subtitle {
            color: #000000 !important;
            color: rgb(0, 0, 0) !important;
            -webkit-text-fill-color: #000000 !important;
            /* Prevent any filters or blend modes */
            filter: none !important;
            -webkit-filter: none !important;
            mix-blend-mode: normal !important;
        }
        
        /* Also force header itself on mobile */
        header {
            color: #000000 !important;
            filter: none !important;
            -webkit-filter: none !important;
        }
        
        .calendar .time-column {
            border-right-color: rgba(255, 255, 255, 0.1) !important;
        }
        
        .calendar .day-column {
            border-right-color: rgba(255, 255, 255, 0.08) !important;
        }
        
        .calendar .time-slots {
            background: 
                repeating-linear-gradient(
                    transparent,
                    transparent 59px,
                    rgba(255, 255, 255, 0.03) 59px, /* Original subtle color */
                    rgba(255, 255, 255, 0.03) 60px
                ) !important;
        }
        
        .controls .nav-btn {
            border-color: rgba(255, 255, 255, 0.7) !important;
        }
        
        .controls .calendar-nav-btn,
        .controls #prev-days,
        .controls #next-days {
            border-color: rgba(255, 255, 255, 0.7) !important;
        }
    }
}

/* Pulse animation for newly scheduled films */
@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(78, 205, 196, 0.7);
    }
    50% {
        transform: scale(1.02);
        box-shadow: 0 0 0 10px rgba(78, 205, 196, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(78, 205, 196, 0);
    }
}

.film-block.pulse-animation {
    animation: pulse 2s ease-in-out;
}

/* Feedback message animations */
@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Share Status Dialog Styling */
#share-status {
    background: rgba(78, 205, 196, 0.15) !important;
    border: 1px solid rgba(78, 205, 196, 0.4) !important;
    border-radius: 8px !important;
    padding: 16px !important;
    margin-top: 16px !important;
    color: rgba(78, 205, 196, 0.95) !important;
    font-size: 13px !important;
    line-height: 1.5 !important;
}

#share-status.error {
    background: rgba(231, 76, 60, 0.15) !important;
    border-color: rgba(231, 76, 60, 0.4) !important;
    color: rgba(255, 107, 107, 0.95) !important;
}

#share-url-input {
    width: 100% !important;
    padding: 10px 12px !important;
    margin-top: 12px !important;
    border-radius: 6px !important;
    background: rgba(0, 0, 0, 0.4) !important;
    border: 1px solid rgba(78, 205, 196, 0.3) !important;
    color: #E0E0E0 !important;
    font-size: 12px !important;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace !important;
    cursor: text !important;
    transition: all 0.2s ease !important;
}

#share-url-input:hover {
    background: rgba(0, 0, 0, 0.5) !important;
    border-color: rgba(78, 205, 196, 0.5) !important;
}

#share-url-input:focus {
    outline: none !important;
    background: rgba(0, 0, 0, 0.6) !important;
    border-color: var(--teal) !important;
    box-shadow: 0 0 0 2px rgba(78, 205, 196, 0.2) !important;
}

.share-success-message {
    font-weight: 600 !important;
    margin-bottom: 12px !important;
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    font-size: 14px !important;
}

.share-help-text {
    margin-top: 10px !important;
    font-size: 11px !important;
    color: rgba(255, 255, 255, 0.5) !important;
    line-height: 1.4 !important;
}

.share-note {
    margin-top: 10px !important;
    padding: 8px 10px !important;
    border-radius: 4px !important;
    font-size: 11px !important;
    line-height: 1.4 !important;
}

.share-note.dynamic {
    background: rgba(78, 205, 196, 0.15) !important;
    color: rgba(78, 205, 196, 0.9) !important;
    border-left: 3px solid var(--teal) !important;
}

.share-note.static {
    background: rgba(255, 255, 255, 0.05) !important;
    color: rgba(255, 255, 255, 0.6) !important;
    border-left: 3px solid rgba(255, 255, 255, 0.2) !important;
}
